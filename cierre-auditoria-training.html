<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Capacitaci√≥n: Entrega de Cierres Auditor√≠a - BTC</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 900px;
            width: 100%;
            overflow: hidden;
            position: relative;
        }
        
        .header {
            background: linear-gradient(135deg, #e60028 0%, #c8102e 100%);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }
        
        .header h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }
        
        .progress-bar {
            background: rgba(255,255,255,0.3);
            height: 10px;
            border-radius: 5px;
            margin-top: 20px;
            overflow: hidden;
        }
        
        .progress {
            background: #ffd700;
            height: 100%;
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 5px;
        }
        
        .content {
            padding: 40px;
            min-height: 500px;
            position: relative;
        }
        
        .screen {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .screen.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .intro-section {
            text-align: center;
        }
        
        .intro-section h2 {
            color: #1e3c72;
            font-size: 2.5em;
            margin-bottom: 20px;
        }
        
        .intro-section p {
            color: #666;
            font-size: 1.2em;
            line-height: 1.6;
            margin-bottom: 30px;
        }
        
        .start-btn {
            background: linear-gradient(135deg, #e60028 0%, #c8102e 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2em;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(230,0,40,0.3);
        }
        
        .start-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(230,0,40,0.4);
        }
        
        .module-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        
        .module-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }
        
        .module-card h3 {
            color: #1e3c72;
            margin-bottom: 15px;
            font-size: 1.5em;
        }
        
        .quiz-question {
            background: #f0f4f8;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
        }
        
        .quiz-question h3 {
            color: #1e3c72;
            margin-bottom: 20px;
            font-size: 1.3em;
        }
        
        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .quiz-option {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 15px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
        }
        
        .quiz-option:hover {
            border-color: #e60028;
            transform: translateX(5px);
        }
        
        .quiz-option.selected {
            background: #e60028;
            color: white;
            border-color: #e60028;
        }
        
        .quiz-option.correct {
            background: #4caf50;
            color: white;
            border-color: #4caf50;
        }
        
        .quiz-option.incorrect {
            background: #f44336;
            color: white;
            border-color: #f44336;
        }
        
        .quiz-option input[type="radio"] {
            margin-right: 15px;
        }
        
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            gap: 20px;
        }
        
        .nav-btn {
            background: #1e3c72;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.3s ease;
            flex: 1;
        }
        
        .nav-btn:hover {
            background: #2a5298;
            transform: translateY(-2px);
        }
        
        .nav-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        
        .status-badge {
            display: inline-block;
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
            margin: 10px 5px;
        }
        
        .status-aprobada {
            background: #4caf50;
            color: white;
        }
        
        .status-auditoria {
            background: #ff9800;
            color: white;
        }
        
        .status-ajustes {
            background: #f44336;
            color: white;
        }
        
        .status-auditada {
            background: #2196f3;
            color: white;
        }
        
        .interactive-demo {
            background: #f5f5f5;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            position: relative;
        }
        
        .demo-screen {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .demo-button {
            background: #2196f3;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s ease;
        }
        
        .demo-button:hover {
            background: #1976d2;
            transform: scale(1.05);
        }
        
        .demo-button.highlighted {
            animation: pulse 2s infinite;
            box-shadow: 0 0 20px rgba(33,150,243,0.5);
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .checklist {
            background: #fff;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .checklist-item {
            display: flex;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        
        .checklist-item:last-child {
            border-bottom: none;
        }
        
        .checklist-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-right: 15px;
            cursor: pointer;
        }
        
        .score-display {
            text-align: center;
            padding: 40px;
        }
        
        .score-circle {
            width: 200px;
            height: 200px;
            margin: 0 auto 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3em;
            font-weight: bold;
            color: white;
            position: relative;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }
        
        .score-pass {
            background: linear-gradient(135deg, #4caf50 0%, #66bb6a 100%);
        }
        
        .score-fail {
            background: linear-gradient(135deg, #f44336 0%, #ef5350 100%);
        }
        
        .retry-message {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            color: #856404;
        }
        
        .error-list {
            background: #ffe0e0;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .error-item {
            color: #d32f2f;
            margin: 10px 0;
            padding-left: 20px;
            position: relative;
        }
        
        .error-item:before {
            content: "‚ö†Ô∏è";
            position: absolute;
            left: 0;
        }
        
        .highlight {
            background: #ffd700;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
        }
        
        .logo {
            width: 150px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ Capacitaci√≥n: Entrega de Cierres Auditor√≠a</h1>
            <p>BTC - Congresses ‚Ä¢ Conventions ‚Ä¢ Events</p>
            <div class="progress-bar">
                <div class="progress" id="progressBar"></div>
            </div>
        </div>
        
        <div class="content">
            <!-- Pantalla de Bienvenida -->
            <div class="screen active" id="screen-0">
                <div class="intro-section">
                    <h2>¬°Bienvenido a tu Capacitaci√≥n!</h2>
                    <p>Como parte del equipo de fulfillment de BTC, es crucial que domines el proceso de entrega de cierres para auditor√≠a.</p>
                    <p>Esta capacitaci√≥n interactiva te guiar√° a trav√©s de todos los pasos necesarios para realizar correctamente este proceso.</p>
                    <p><strong>‚ö° Importante:</strong> Debes obtener al menos 90% de aciertos en la evaluaci√≥n final para completar la capacitaci√≥n.</p>
                    <button class="start-btn" onclick="nextScreen()">Comenzar Capacitaci√≥n</button>
                </div>
            </div>
            
            <!-- M√≥dulo 1: Datos Generales del Cierre -->
            <div class="screen" id="screen-1">
                <div class="module-card">
                    <h3>üìã M√≥dulo 1: Datos Generales del Cierre</h3>
                    <p>En la pantalla de cierre encontrar√°s los siguientes elementos principales:</p>
                    
                    <div class="interactive-demo">
                        <div class="demo-screen">
                            <h4>Cierre del evento - MLC LATAM Workshop</h4>
                            <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                                <button class="demo-button">üì• Exportar</button>
                                <button class="demo-button highlighted">üìä Datos Auditor√≠a</button>
                                <button class="demo-button">‚úÖ Realizar cierre</button>
                            </div>
                            <div style="background: #f5f5f5; padding: 15px; border-radius: 5px;">
                                <p><strong>ID-Cotizaci√≥n - Inciso:</strong> 699 - 6</p>
                                <p><strong>DK:</strong> 000482A001</p>
                                <p><strong>Cliente:</strong> PEPSICO INTERNACIONAL MEXICO</p>
                                <p><strong>No. de asistentes:</strong> 25</p>
                            </div>
                        </div>
                    </div>
                    
                    <p style="margin-top: 20px;">üí° <strong>Recuerda:</strong> Para poder realizar el env√≠o a auditor√≠a se debe generar el cierre directo en el bot√≥n "CIERRE" en ECO WEB.</p>
                </div>
                
                <div class="navigation">
                    <button class="nav-btn" onclick="previousScreen()">Anterior</button>
                    <button class="nav-btn" onclick="nextScreen()">Siguiente</button>
                </div>
            </div>
            
            <!-- M√≥dulo 2: Estados del Proceso -->
            <div class="screen" id="screen-2">
                <div class="module-card">
                    <h3>üö¶ M√≥dulo 2: Estados del Proceso de Auditor√≠a</h3>
                    <p>Es fundamental que conozcas los 4 estados por los que pasa un cierre:</p>
                    
                    <div style="margin: 20px 0;">
                        <div class="status-badge status-aprobada">Aprobada</div>
                        <p>El DK ha sido aprobado. La cotizaci√≥n puede seguir en revisi√≥n. Debes dar click en üîµ Realizar cierre para enviar a auditor√≠a.</p>
                    </div>
                    
                    <div style="margin: 20px 0;">
                        <div class="status-badge status-auditoria">En Auditor√≠a</div>
                        <p>El DK ha sido enviado a auditor√≠a para su validaci√≥n. ‚ö†Ô∏è No se puede modificar la cotizaci√≥n ni agregar nuevas SP's.</p>
                    </div>
                    
                    <div style="margin: 20px 0;">
                        <div class="status-badge status-ajustes">En Ajustes por Auditor√≠a</div>
                        <p>El equipo de auditor√≠a solicita ajustes. Puede ser por: errores en cotizaci√≥n, mark ups no desglosados, comisiones no consideradas o SP's pendientes.</p>
                    </div>
                    
                    <div style="margin: 20px 0;">
                        <div class="status-badge status-auditada">Auditada</div>
                        <p>‚úÖ El cierre est√° correcto y sin SP's pendientes. Se pueden ingresar SC's de cobro a cliente.</p>
                    </div>
                </div>
                
                <div class="navigation">
                    <button class="nav-btn" onclick="previousScreen()">Anterior</button>
                    <button class="nav-btn" onclick="nextScreen()">Siguiente</button>
                </div>
            </div>
            
            <!-- M√≥dulo 3: Estado Financiero -->
            <div class="screen" id="screen-3">
                <div class="module-card">
                    <h3>üí∞ M√≥dulo 3: Estado Financiero</h3>
                    <p>El estado financiero muestra informaci√≥n cr√≠tica del evento:</p>
                    
                    <div class="checklist">
                        <h4>Elementos del Estado Financiero:</h4>
                        <div class="checklist-item">
                            <input type="checkbox" id="ef1">
                            <label for="ef1">Monto total cotizado al aprobar el DK</label>
                        </div>
                        <div class="checklist-item">
                            <input type="checkbox" id="ef2">
                            <label for="ef2">Monto total del cierre (Inciso activo/cierre)</label>
                        </div>
                        <div class="checklist-item">
                            <input type="checkbox" id="ef3">
                            <label for="ef3">Diferencia entre montos y su justificaci√≥n</label>
                        </div>
                        <div class="checklist-item">
                            <input type="checkbox" id="ef4">
                            <label for="ef4">Utilidad desde cotizaci√≥n vs. Utilidad en cierre</label>
                        </div>
                        <div class="checklist-item">
                            <input type="checkbox" id="ef5">
                            <label for="ef5">Utilidad operativa real (Ingreso - Costo)</label>
                        </div>
                    </div>
                    
                    <p style="margin-top: 20px;">üìä <strong>Nota importante:</strong> Todos los montos son sin IVA</p>
                </div>
                
                <div class="navigation">
                    <button class="nav-btn" onclick="previousScreen()">Anterior</button>
                    <button class="nav-btn" onclick="nextScreen()">Siguiente</button>
                </div>
            </div>
            
            <!-- M√≥dulo 4: Carpetas de Drive -->
            <div class="screen" id="screen-4">
                <div class="module-card">
                    <h3>üìÅ M√≥dulo 4: Estructura de Carpetas en Drive</h3>
                    <p>La carpeta debe tener el <span class="highlight">DK y nombre del evento</span>. Estructura requerida:</p>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                        <div style="background: #f0f4f8; padding: 15px; border-radius: 10px;">
                            <h4>üìå ASESOR</h4>
                            <ul style="list-style: none; padding-left: 10px;">
                                <li>‚Ä¢ Gastos de asesor</li>
                                <li>‚Ä¢ D√≠as operados</li>
                                <li>‚Ä¢ Comprobaci√≥n de vi√°ticos</li>
                            </ul>
                        </div>
                        
                        <div style="background: #f0f4f8; padding: 15px; border-radius: 10px;">
                            <h4>üìå COTIZACI√ìN/CIERRE</h4>
                            <ul style="list-style: none; padding-left: 10px;">
                                <li>‚Ä¢ Cotizaci√≥n y cierre en formato del cliente</li>
                                <li>‚Ä¢ Incluir los subeventos</li>
                            </ul>
                        </div>
                        
                        <div style="background: #f0f4f8; padding: 15px; border-radius: 10px;">
                            <h4>üìå CXC</h4>
                            <ul style="list-style: none; padding-left: 10px;">
                                <li>‚Ä¢ Orden de compra</li>
                                <li>‚Ä¢ Facturas ya generadas</li>
                            </ul>
                        </div>
                        
                        <div style="background: #f0f4f8; padding: 15px; border-radius: 10px;">
                            <h4>üìå PROVEEDORES</h4>
                            <ul style="list-style: none; padding-left: 10px;">
                                <li>‚Ä¢ Facturas de proveedores</li>
                                <li>‚Ä¢ Cierres de proveedores</li>
                                <li>‚Ä¢ Desglose de comisiones</li>
                            </ul>
                        </div>
                    </div>
                    
                    <p>Tambi√©n deben existir carpetas para: <strong>PROVEEDORES INTERNOS</strong>, <strong>ROOMING LIST</strong> y <strong>TRASLADOS</strong></p>
                </div>
                
                <div class="navigation">
                    <button class="nav-btn" onclick="previousScreen()">Anterior</button>
                    <button class="nav-btn" onclick="nextScreen()">Siguiente</button>
                </div>
            </div>
            
            <!-- M√≥dulo 5: Errores Comunes -->
            <div class="screen" id="screen-5">
                <div class="module-card">
                    <h3>‚ö†Ô∏è M√≥dulo 5: Errores M√°s Comunes</h3>
                    <p>Evita estos errores frecuentes para asegurar una aprobaci√≥n r√°pida:</p>
                    
                    <div class="error-list">
                        <div class="error-item">No asignar proveedores en cotizaci√≥n</div>
                        <div class="error-item">No agregar rubro de vuelos en la cotizaci√≥n</div>
                        <div class="error-item">No desglosar markup's</div>
                        <div class="error-item">No desglosar comisiones</div>
                        <div class="error-item">SP's pendientes por ingresar</div>
                        <div class="error-item">No colocar comentarios relevantes</div>
                        <div class="error-item">No dar acceso a la carpeta</div>
                        <div class="error-item">Enviar correo de entrega de cierre por separado</div>
                        <div class="error-item">Carpetas incompletas</div>
                        <div class="error-item">Generar DK's de internos por separado</div>
                        <div class="error-item">Tiempos de entrega</div>
                        <div class="error-item">Mandar cierres a cliente sin VoBo de auditor√≠a</div>
                    </div>
                    
                    <p style="margin-top: 20px;">üí° <strong>Tip:</strong> Revisa esta lista antes de enviar cada cierre a auditor√≠a.</p>
                </div>
                
                <div class="navigation">
                    <button class="nav-btn" onclick="previousScreen()">Anterior</button>
                    <button class="nav-btn" onclick="startQuiz()">Comenzar Evaluaci√≥n</button>
                </div>
            </div>
            
            <!-- Evaluaci√≥n -->
            <div class="screen" id="quiz-screen">
                <h2 style="color: #1e3c72; margin-bottom: 30px;">üìù Evaluaci√≥n Final</h2>
                <div id="quizContainer"></div>
                <div class="navigation">
                    <button class="nav-btn" onclick="submitQuiz()" id="submitBtn" style="display: none;">Enviar Evaluaci√≥n</button>
                </div>
            </div>
            
            <!-- Resultado -->
            <div class="screen" id="result-screen">
                <div class="score-display">
                    <div class="score-circle" id="scoreCircle">
                        <span id="scoreText"></span>
                    </div>
                    <h2 id="resultMessage"></h2>
                    <p id="resultDetails"></p>
                    <button class="start-btn" onclick="retryQuiz()" id="retryBtn" style="display: none;">Reintentar Capacitaci√≥n</button>
                    <button class="start-btn" onclick="finishTraining()" id="finishBtn" style="display: none;">Finalizar Capacitaci√≥n</button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        let currentScreen = 0;
        const totalScreens = 6;
        let quizAnswers = {};
        let currentQuestionIndex = 0;
        
        const quizQuestions = [
            {
                id: 1,
                question: "¬øCu√°l es el bot√≥n que debes presionar en ECO WEB para generar el cierre y enviarlo a auditor√≠a?",
                options: [
                    "Exportar",
                    "Datos Auditor√≠a",
                    "CIERRE",
                    "Solicitudes de pago"
                ],
                correct: 2
            },
            {
                id: 2,
                question: "¬øEn qu√© estado NO se puede modificar la cotizaci√≥n ni agregar nuevas SP's?",
                options: [
                    "Aprobada",
                    "En Auditor√≠a",
                    "En Ajustes por Auditor√≠a",
                    "Auditada"
                ],
                correct: 1
            },
            {
                id: 3,
                question: "¬øQu√© informaci√≥n debe contener el nombre de la carpeta en Drive?",
                options: [
                    "Solo el nombre del evento",
                    "Solo el n√∫mero de cotizaci√≥n",
                    "El DK y nombre del evento",
                    "La fecha del evento"
                ],
                correct: 2
            },
            {
                id: 4,
                question: "¬øCu√°les de los siguientes NO es un error com√∫n en el proceso de cierre?",
                options: [
                    "No desglosar markup's",
                    "Enviar el cierre por correo electr√≥nico autom√°tico",
                    "No asignar proveedores en cotizaci√≥n",
                    "Mandar cierres a cliente sin VoBo de auditor√≠a"
                ],
                correct: 1
            },
            {
                id: 5,
                question: "En el estado 'En Ajustes por Auditor√≠a', ¬øqu√© debes hacer despu√©s de realizar las correcciones?",
                options: [
                    "Esperar a que auditor√≠a lo revise autom√°ticamente",
                    "Volver a enviar el cierre a auditor√≠a",
                    "Enviar un correo por separado",
                    "Crear un nuevo DK"
                ],
                correct: 1
            },
            {
                id: 6,
                question: "¬øQu√© carpetas son obligatorias en la estructura de Drive? (Selecciona la opci√≥n correcta)",
                options: [
                    "Solo ASESOR y CXC",
                    "ASESOR, COTIZACI√ìN/CIERRE, CXC, PROVEEDORES, PROVEEDORES INTERNOS, ROOMING LIST y TRASLADOS",
                    "Solo PROVEEDORES y COTIZACI√ìN",
                    "Las carpetas son opcionales"
                ],
                correct: 1
            },
            {
                id: 7,
                question: "¬øQu√© informaci√≥n muestra el Estado Financiero?",
                options: [
                    "Solo el monto total cotizado",
                    "Solo la utilidad operativa",
                    "Monto cotizado vs cierre, utilidades y diferencias",
                    "Solo las comisiones"
                ],
                correct: 2
            },
            {
                id: 8,
                question: "Una vez que el cierre est√° en estado 'Auditada', ¬øqu√© puedes hacer?",
                options: [
                    "Modificar la cotizaci√≥n",
                    "Agregar nuevas SP's",
                    "Ingresar SC's de cobro a cliente",
                    "Cambiar los proveedores"
                ],
                correct: 2
            },
            {
                id: 9,
                question: "¬øQu√© debe incluir la carpeta de PROVEEDORES?",
                options: [
                    "Solo las facturas",
                    "Facturas, cierres de proveedores y desglose de comisiones",
                    "Solo el desglose de comisiones",
                    "La orden de compra"
                ],
                correct: 1
            },
            {
                id: 10,
                question: "Seg√∫n el documento, todos los montos en el estado financiero se muestran:",
                options: [
                    "Con IVA incluido",
                    "Sin IVA",
                    "Con IVA y servicios",
                    "En d√≥lares americanos"
                ],
                correct: 1
            }
        ];
        
        function updateProgress() {
            const progress = ((currentScreen + 1) / (totalScreens + 2)) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }
        
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
            updateProgress();
        }
        
        function nextScreen() {
            if (currentScreen < totalScreens - 1) {
                currentScreen++;
                showScreen(`screen-${currentScreen}`);
            }
        }
        
        function previousScreen() {
            if (currentScreen > 0) {
                currentScreen--;
                showScreen(`screen-${currentScreen}`);
            }
        }
        
        function startQuiz() {
            currentScreen = totalScreens;
            showScreen('quiz-screen');
            renderQuizQuestions();
        }
        
        function renderQuizQuestions() {
            const container = document.getElementById('quizContainer');
            container.innerHTML = '';
            
            quizQuestions.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'quiz-question';
                questionDiv.innerHTML = `
                    <h3>Pregunta ${index + 1}: ${q.question}</h3>
                    <div class="quiz-options">
                        ${q.options.map((option, optIndex) => `
                            <label class="quiz-option" onclick="selectOption(${q.id}, ${optIndex}, this)">
                                <input type="radio" name="question-${q.id}" value="${optIndex}">
                                ${option}
                            </label>
                        `).join('')}
                    </div>
                `;
                container.appendChild(questionDiv);
            });
            
            document.getElementById('submitBtn').style.display = 'block';
        }
        
        function selectOption(questionId, optionIndex, element) {
            // Remover selecci√≥n previa
            element.parentElement.querySelectorAll('.quiz-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // Marcar como seleccionada
            element.classList.add('selected');
            element.querySelector('input').checked = true;
            
            // Guardar respuesta
            quizAnswers[questionId] = optionIndex;
        }
        
        function submitQuiz() {
            let correctAnswers = 0;
            const totalQuestions = quizQuestions.length;
            
            quizQuestions.forEach(q => {
                if (quizAnswers[q.id] === q.correct) {
                    correctAnswers++;
                }
            });
            
            const score = Math.round((correctAnswers / totalQuestions) * 100);
            showResults(score, correctAnswers, totalQuestions);
        }
        
        function showResults(score, correct, total) {
            currentScreen = totalScreens + 1;
            showScreen('result-screen');
            
            const scoreCircle = document.getElementById('scoreCircle');
            const scoreText = document.getElementById('scoreText');
            const resultMessage = document.getElementById('resultMessage');
            const resultDetails = document.getElementById('resultDetails');
            const retryBtn = document.getElementById('retryBtn');
            const finishBtn = document.getElementById('finishBtn');
            
            scoreText.textContent = score + '%';
            
            if (score >= 90) {
                scoreCircle.className = 'score-circle score-pass';
                resultMessage.textContent = '¬°Felicidades! Has aprobado la capacitaci√≥n';
                resultDetails.innerHTML = `
                    <p>Has obtenido ${correct} respuestas correctas de ${total} preguntas.</p>
                    <p>Ahora est√°s listo para realizar el proceso de entrega de cierres para auditor√≠a.</p>
                `;
                retryBtn.style.display = 'none';
                finishBtn.style.display = 'inline-block';
            } else {
                scoreCircle.className = 'score-circle score-fail';
                resultMessage.textContent = 'No has alcanzado el puntaje m√≠nimo';
                resultDetails.innerHTML = `
                    <p>Has obtenido ${correct} respuestas correctas de ${total} preguntas.</p>
                    <p>Necesitas al menos 90% (9 de 10 preguntas correctas) para aprobar.</p>
                    <div class="retry-message">
                        <p><strong>Es necesario que vuelvas a tomar la capacitaci√≥n completa.</strong></p>
                        <p>Presta especial atenci√≥n a los m√≥dulos donde tuviste dificultades.</p>
                    </div>
                `;
                retryBtn.style.display = 'inline-block';
                finishBtn.style.display = 'none';
            }
        }
        
        function retryQuiz() {
            // Reiniciar todo
            currentScreen = 0;
            quizAnswers = {};
            showScreen('screen-0');
            
            // Limpiar respuestas previas
            document.querySelectorAll('.quiz-option').forEach(opt => {
                opt.classList.remove('selected', 'correct', 'incorrect');
            });
            document.querySelectorAll('input[type="radio"]').forEach(radio => {
                radio.checked = false;
            });
            document.querySelectorAll('input[type="checkbox"]').forEach(cb => {
                cb.checked = false;
            });
        }
        
        function finishTraining() {
            alert('¬°Capacitaci√≥n completada exitosamente! Ya puedes cerrar esta ventana.');
        }
        
        // Inicializar
        updateProgress();
    </script>
</body>
</html>